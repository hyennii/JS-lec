<!doctype html>
<html lang="ko">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-compatible" content="chrome=1,IE=edge">
	<title>스크를인터렉션</title>
	<link rel="stylesheet" type="text/css" href="">
	<link rel="stylesheet" type="text/css" href="../../library/css/common.css">
	<script type="text/javascript" src="../../library/js/jquery.1.12.4.js"></script>
</head>
<style type="text/css">
.com_tit {
	margin: 100px 0 80px;
	font-size: 70px;
	text-align: center;
}

.sc_infinity {}

.sc_infinity .list {}

.sc_infinity .list:after {
	clear: both;
	display: block;
	content: '';
}

.sc_infinity .list li {
	float: left;
	width: 25%;
}

.sc_infinity .list li figure {
	padding: 10px;
}

.footer {
	height: 200px;
	background-color: #ddd;
}

.footer p {
	padding: 50px 20px;
}
</style>

<body>
	<div class="wrap">
		<section class="sec01">
			<h2 class="com_tit">INFINITE SCROLL</h2>
			<article class="sc_infinity">
				<ul class="list">
					<li>
						<figure>
							<img src="../images/1.jpg">
						</figure>
					</li>
					<li>
						<figure>
							<img src="../images/2.jpg">
						</figure>
					</li>
					<li>
						<figure>
							<img src="../images/3.jpg">
						</figure>
					</li>
					<li>
						<figure>
							<img src="../images/1.jpg">
						</figure>
					</li>
					<li>
						<figure>
							<img src="../images/2.jpg">
						</figure>
					</li>
					<li>
						<figure>
							<img src="../images/3.jpg">
						</figure>
					</li>
				</ul>
			</article>
			<div class="footer">
				<p>FOOTER</p>
			</div>
		</section>
	</div>
	<script type="text/javascript">
	$(function() {
		var target = $('.sc_infinity .list');
		var winTop; //스크롤 위치를 잡을 변수
		var onTop; //문서 끝에 도착했는지 알수 있게 해주는 변수
		var breakList = 10;
		var listCount = 0;

		$(window).scroll(function() {
			listCall();
		});
		function getList() {
			var list;

			listCount++;

			if(listCount > breakList){
				list = null;
			} else{
				list = '<li><figure><img src="../images/1.jpg"></figure></li>';
				list += '<li><figure><img src="../images/2.jpg"></figure></li>';
				list += '<li><figure><img src="../images/3.jpg"></figure></li>';
			}

			return list;
		}
		function listCall() {
			winTop = $(window).scrollTop();
			onTop = $(document).height() - $(window).height() - $('.footer').height();
			            // 문서 전체 높이 값 - 스크린 높이 - 푸터 높이
                            // 푸터에 다다르기 전 로딩하기 위해

			if(winTop >= onTop) {
				var data = getList();

				if(data !== null) {
					target.append(data);
					console.log('call data');
				} else {
					return false;
				}
			}
		}

		function init() {
			listCall();
		}

		init(); //초기화
	});
	</script>
</body>

</html>









